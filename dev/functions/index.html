<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions · StatisticalRethinkingJulia/MCMCBenchmarks.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>StatisticalRethinkingJulia/MCMCBenchmarks.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../purpose/">Purpose</a></li><li><a class="toctext" href="../design/">Design</a></li><li class="current"><a class="toctext" href>Functions</a><ul class="internal"><li><a class="toctext" href="#Sampler-Structs-1">Sampler Structs</a></li><li><a class="toctext" href="#Functions-1">Functions</a></li></ul></li><li><a class="toctext" href="../example/">Example</a></li><li><a class="toctext" href="../benchmarks/">Benchmark Results</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Functions</a></li></ul><a class="edit-page" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/master/docs/src/functions.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Functions</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Sampler-Structs-1" href="#Sampler-Structs-1">Sampler Structs</a></h2><p>Each sampler is associated with a MCMC sampler struct, which is a subtype of MCMCSampler. In MCMCBenchmarks, we define subtypes of MCMCSampler for three popular NUTS MCMC samplers in Julia: <a href="https://github.com/StanJulia/CmdStan.jl">CmdStan</a>, <a href="https://github.com/TuringLang/AdvancedHMC.jl">AdvancedHMC</a> via <a href="https://turing.ml">Turing</a>, and <a href="https://github.com/tpapp/DynamicHMC.jl">DynamicHMC</a>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.MCMCSampler" href="#MCMCBenchmarks.MCMCSampler"><code>MCMCBenchmarks.MCMCSampler</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Abstract MCMC sampler type</p></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L2-L4">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.CmdStanNUTS" href="#MCMCBenchmarks.CmdStanNUTS"><code>MCMCBenchmarks.CmdStanNUTS</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>MCMC sampler struct for CmdStan NUTS</p><ul><li><code>model</code>: model configuration</li><li><code>dir</code>: probject directory</li><li><code>id</code>: a unique identifier for each instance of CmdStan in parallel applications</li><li><code>name</code>: a unique identifer given to each sampler</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L24-L31">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.AHMCNUTS" href="#MCMCBenchmarks.AHMCNUTS"><code>MCMCBenchmarks.AHMCNUTS</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>MCMC sampler struct for AdvancedHMC NUTS</p><ul><li><code>model</code>: model function that accepts data</li><li><code>config</code>: sampler configution settings</li><li><code>name</code>: a unique identifer given to each sampler</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L7-L13">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.DHMCNUTS" href="#MCMCBenchmarks.DHMCNUTS"><code>MCMCBenchmarks.DHMCNUTS</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>MCMC sampler struct for DynamicHMC NUTS</p><ul><li><code>model</code>: model function that accepts data</li><li><code>config</code>: sampler configution settings</li><li><code>name</code>: a unique identifer given to each sampler</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L42-L48">source</a></section><h2><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h2><h3><a class="nav-anchor" id="Top-level-Benchmark-Routines-1" href="#Top-level-Benchmark-Routines-1">Top-level Benchmark Routines</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.benchmark" href="#MCMCBenchmarks.benchmark"><code>MCMCBenchmarks.benchmark</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Runs the benchmarking procedure and returns the results</p><ul><li><code>samplers</code>: a tuple of samplers or a single sampler object</li><li><code>simulate</code>: model simulation function with keyword Nd</li><li><code>Nreps</code>: number of times the benchmark is repeated for each factor combination</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L94-L100">source</a></section><pre><code class="language-julia">benchmark!(samplers,results,csr̂,simulate,Nreps,chains;kwargs...)

benchmark!(sampler::T,results,csr̂,simulate,Nreps,chains;kwargs...) where {T&lt;:MCMCSampler}</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.pbenchmark" href="#MCMCBenchmarks.pbenchmark"><code>MCMCBenchmarks.pbenchmark</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Runs the benchmarking procedure defined in benchmark in parallel and returns the results</p><ul><li><code>samplers</code>: a tuple of samplers or a single sampler object</li><li><code>simulate</code>: model simulation function with keyword Nd</li><li><code>Nreps</code>: number of times the benchmark is repeated for each factor combination</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L110-L117">source</a></section><pre><code class="language-julia">pbenchmark(samplers,simulate,Nreps;kwargs...)
</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.benchmark!" href="#MCMCBenchmarks.benchmark!"><code>MCMCBenchmarks.benchmark!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Primary function that performs mcmc benchmark repeatedly on a set of samplers and records the results.</p><ul><li>&#39;sampler&#39;: tuple of sampler objects</li><li><code>results</code>: DataFrame containing benchmark results</li><li><code>csr̂</code>: cross sampler r̂</li><li><code>simulate</code>: data generating function</li><li><code>Nreps</code>: number of repetitions for a given set of simulation parameters. Default = 100</li><li><code>kwargs</code>: optional keyword arguments that are passed to modifyConfig!, updateResults! and</li></ul><p>runSampler, providing flexibility in benchmark simulations.</p></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L58-L68">source</a></section><pre><code class="language-julia">benchmark!(samplers,results,csr̂,simulate,Nreps,chains;kwargs...)</code></pre><h3><a class="nav-anchor" id="Overloaded-Benchmark-Functions-1" href="#Overloaded-Benchmark-Functions-1">Overloaded Benchmark Functions</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.modifyConfig!" href="#MCMCBenchmarks.modifyConfig!"><code>MCMCBenchmarks.modifyConfig!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Modifies MCMC sampler configuration, including number of samples, target acceptance rate and others depending on the specific sampler.</p><ul><li><code>s</code>: sampler object</li><li><code>Nsamples</code>: total number of MCMC samples</li><li><code>Nadapt</code>: number of adaption samples during warm up</li><li><code>delta</code>: target acceptance rate.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L215-L222">source</a></section><pre><code class="language-julia">modifyConfig!(s::AHMCNUTS;Nsamples,Nadapt,delta,kwargs...)</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.updateResults!" href="#MCMCBenchmarks.updateResults!"><code>MCMCBenchmarks.updateResults!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Update the results DataFrame on each iteration</p><ul><li><code>s</code>: MCMC sampler object</li><li><code>performance</code>: includes MCMC Chain, execution time, and memory measurements</li><li><code>results</code>: DataFrame containing benchmark results</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L149-L154">source</a></section><pre><code class="language-julia">updateResults!(s::CmdStanNUTS,performance,results;kwargs...)</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MCMCBenchmarks.runSampler" href="#MCMCBenchmarks.runSampler"><code>MCMCBenchmarks.runSampler</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Extracts model and configuration from sampler object and performs parameter estimation</p><ul><li><code>s</code>: sampler object</li><li><code>data</code>: data for benchmarking</li><li><code>Nchains</code>: number of chains ran serially. Default =  1</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/1542844c8c12fe7f5a263f8734672e7a55625d7a/src/core_benchmarking.jl#L126-L132">source</a></section><pre><code class="language-julia"> runSampler(s::AHMCNUTS,data;kwargs...)
 ```

### Helper Functions
</code></pre><p>@docs addPerformance!</p><pre><code class="language-none"></code></pre><p>julia addPerformance!(df,p)</p><pre><code class="language-none"></code></pre><p>@docs addKW!</p><pre><code class="language-none"></code></pre><p>julia addKW!(df;kwargs...)</p><pre><code class="language-none"></code></pre><p>@docs addChainSummary!</p><pre><code class="language-none"></code></pre><p>julia addChainSummary!(newDF,chn,df,col)</p><pre><code class="language-none"></code></pre><p>@docs addHPD!</p><pre><code class="language-none"></code></pre><p>julia addHPD!(newDF,chain)</p><pre><code class="language-none"></code></pre><p>@docs addMeans!</p><pre><code class="language-none"></code></pre><p>julia addMeans!(newDF,df)</p><pre><code class="language-none"></code></pre><p>@docs run<em>all</em>benchmarks</p><pre><code class="language-none"></code></pre><p>julia run<em>all</em>benchmarks()</p><pre><code class="language-none">### Plotting
</code></pre><p>@docs plotdensity</p><pre><code class="language-none"></code></pre><p>julia plotdensity(df::DataFrame,metric::Symbol,group=(:sampler,);save=false,     figfmt=&quot;pdf&quot;,dir=&quot;&quot;,options...)</p><pre><code class="language-none"></code></pre><p>@docs plotsummary</p><pre><code class="language-none"></code></pre><p>julia plotsummary(df::DataFrame,xvar::Symbol,metric::Symbol,group=(:sampler,);save=false,     figfmt=&quot;pdf&quot;,func=mean,dir=&quot;&quot;,options...)</p><pre><code class="language-none"></code></pre><p>@docs plotscatter</p><pre><code class="language-none"></code></pre><p>julia plotscatter(df::DataFrame,xvar::Symbol,metric::Symbol,group=(:sampler,);save=false,     figfmt=&quot;pdf&quot;,func=mean,dir=&quot;&quot;,options...)</p><pre><code class="language-none"></code></pre><p>@docs plotrecovery</p><pre><code class="language-none"></code></pre><p>julia plotrecovery(df::DataFrame,parms,group=(:sampler,);save=false,     figfmt=&quot;pdf&quot;,dir=&quot;&quot;,options...) ```</p><footer><hr/><a class="previous" href="../design/"><span class="direction">Previous</span><span class="title">Design</span></a><a class="next" href="../example/"><span class="direction">Next</span><span class="title">Example</span></a></footer></article></body></html>
