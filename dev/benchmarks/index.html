<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Benchmark Results · StatisticalRethinkingJulia/MCMCBenchmarks.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>StatisticalRethinkingJulia/MCMCBenchmarks.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../purpose/">Purpose</a></li><li><a class="toctext" href="../design/">Design</a></li><li><a class="toctext" href="../functions/">Functions</a></li><li><a class="toctext" href="../example/">Example</a></li><li class="current"><a class="toctext" href>Benchmark Results</a><ul class="internal"><li><a class="toctext" href="#Benchmark-Results-1">Benchmark Results</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Benchmark Results</a></li></ul><a class="edit-page" href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/blob/master/docs/src/benchmarks.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Benchmark Results</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Benchmark-Results-1" href="#Benchmark-Results-1">Benchmark Results</a></h2><p>In this section, we report key benchmark results comparing Turing, CmdStan, and DynamicHMC for a variety of models. The code for each of the benchmarks can be found in the <a href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/tree/master/Examples">Examples</a> folder, while the corresponding code for the models in folder named <a href="https://github.com/StatisticalRethinkingJulia/MCMCBenchmarks.jl/tree/master/Models">Models</a>. The benchmarks were performed with the following software and hardware:</p><ul><li>Julia 1.2.0</li><li>CmdStan 5.2.0</li><li>Turing 0.7.0</li><li>AdvancedHMC 0.2.6</li><li>DynamicHMC 2.1.0</li><li>Ubuntu 18.04</li><li>Intel(R) Core(TM) i7-4790K CPU @ 4.00GHz</li></ul><p>Before proceeding to the results, a few caveats should be noted. (1) Turing&#39;s performance may improve over time as it matures. (2) memory allocations and garbage collection time are not applicable for CmdStan because the heavy lifting is performed in C++. (3) Compared to Stan, Turing and DynamicHMC exhibit poor scalability in large part due to the use of forward mode autodiff. As soon as the reverse mode autodiff package <a href="https://github.com/FluxML/Zygote.jl">Zygote</a> matures in Julia, it will become the default autodiff in MCMCBenchmarks.</p><h3><a class="nav-anchor" id="Gaussian-1" href="#Gaussian-1">Gaussian</a></h3><ul><li>Model</li></ul><div>\[\mu \sim Normal(0,1)\]</div><div>\[\sigma \sim TCauchy(0,5,0,\infty)\]</div><div>\[Y \sim Normal(\mu,\sigma)\]</div><ul><li>benchmark design</li></ul><pre><code class="language-julia">#Number of data points
Nd = [10, 100, 1000, 10_000]
#Number of simulations
Nreps = 50
options = (Nsamples=2000, Nadapt=1000, delta=.8, Nd=Nd)</code></pre><ul><li>speed</li></ul><img src="images/Gaussian/summary_time.png" width="500"/><ul><li>allocations</li></ul><img src="images/Gaussian/summary_allocations.png" width="500"/><ul><li>effective sample size</li></ul><img src="images/Gaussian/density_mu_ess.png" width="700"/><h3><a class="nav-anchor" id="Signal-Detection-Theory-1" href="#Signal-Detection-Theory-1">Signal Detection Theory</a></h3><ul><li>Model</li></ul><div>\[d \sim Normal(0,1/\sqrt(.5))\]</div><div>\[c \sim Normal(0,1/\sqrt(2))\]</div><div>\[\theta_{hits} = ϕ(d/2-c)\]</div><div>\[\theta_{fas} = ϕ(-d/2-c)\]</div><div>\[n_{hits} \sim Binomial(N,\theta_{hits})\]</div><div>\[n_{fas} \sim Binomial(N,\theta_{fas})\]</div><ul><li>benchmark design</li></ul><pre><code class="language-julia">#Number of data points
Nd = [10, 100, 1000, 10_000]
#Number of simulations
Nreps = 100
options = (Nsamples=2000, Nadapt=1000, delta=.8, Nd=Nd)
#perform the benchmark</code></pre><ul><li>speed</li></ul><img src="images/SDT/summary_time.png" width="500"/><ul><li>allocations</li></ul><img src="images/SDT/summary_allocations.png" width="500"/><ul><li>effective sample size</li></ul><img src="images/SDT/density_d_ess.png" width="700"/><h3><a class="nav-anchor" id="Linear-Regression-1" href="#Linear-Regression-1">Linear Regression</a></h3><ul><li>Model</li></ul><div>\[\mu \sim Normal(0,1)\]</div><div>\[\sigma \sim TCauchy(0,5,0,\infty)\]</div><div>\[Y \sim Normal(\mu,\sigma)\]</div><ul><li>benchmark design</li></ul><pre><code class="language-julia">#Number of data points
Nd = [10, 50, 200]
#Number of simulations
Nreps = 50
options = (Nsamples=2000,Nadapt=1000,delta=.8,Nd=Nd)
#perform the benchmark
results = pbenchmark(samplers,simulateLBA,Nreps;options...)</code></pre><ul><li>speed</li></ul><img src="images/Linear_Regression/summary_time.png" width="700"/><ul><li>allocations</li></ul><img src="images/Linear_Regression/summary_allocations.png" width="700"/><ul><li>effective sample size</li></ul><img src="images/Linear_Regression/summary_B0_ess.png" width="700"/><h3><a class="nav-anchor" id="Linear-Ballistic-Accumulator-(LBA)-1" href="#Linear-Ballistic-Accumulator-(LBA)-1">Linear Ballistic Accumulator (LBA)</a></h3><ul><li>Model</li></ul><div>\[\tau \sim TNormal(.4,.1,0,y_{min})\]</div><div>\[A \sim TNormal(.8,.4,0,\infty)\]</div><div>\[k \sim TNormal(.2,.3,0,\infty)\]</div><div>\[v \sim Normal(0,3)\]</div><div>\[(t,c) \sim LBA(A,b,v,s,\tau)\]</div><p>where</p><div>\[t = y_i - t_{er}\]</div><div>\[b = A + k\]</div><div>\[s = 1\]</div><div>\[LBA(A,b,v,s,\tau) = f_c(t)\prod_{j \neq c} (1-F_j(t))\]</div><div>\[f_c(t) = \frac{1}{A} \left[-v_c \Phi\left( \frac{b-A-tv_c}{ts} \right) + \phi\left( \frac{b-A-tv_c}{ts} \right) +
+ v_c \Phi\left( \frac{b-tv_c}{ts} \right) + s \phi\left( \frac{b-tv_c}{ts} \right) \right]\]</div><div>\[\begin{multline*}
 F_c(t) = 1 + \frac{b-A-tv_c}{A} \Phi\left( \frac{b-A-tv_c}{ts} \right) - \frac{b-tv_c}{A} \Phi\left( \frac{b-tv_c}{ts} \right)\\
 + \frac{ts}{A} \phi\left( \frac{b-A-tv_c}{ts} \right) - \frac{ts}{A} \phi\left( \frac{b-tv_c}{ts} \right)
 \end{multline*}\]</div><div>\[Y = {y_1,...,y_n}\]</div><div>\[y_{min} = minimum(Y)\]</div><ul><li>benchmark design</li><li>speed</li></ul><img src="images/LBA/summary_time.png" width="500"/><ul><li>allocations</li></ul><img src="images/LBA/summary_allocations.png" width="500"/><ul><li>effective sample size</li></ul><img src="images/LBA/density_A_ess.png" width="700"/><h3><a class="nav-anchor" id="Poisson-Regression-1" href="#Poisson-Regression-1">Poisson Regression</a></h3><ul><li>Model</li></ul><div>\[a_0 \sim Normal(0,10)\]</div><div>\[a_1 \sim Normal(0,1)\]</div><div>\[\sigma_{a0} \sim TCauchy(0,1,0,\infty)\]</div><div>\[a_{0i} ~ \sim Normal(0,\sigma_{a0})\]</div><div>\[\lambda = e^{a_0 + a_{0i} + a_1*x_i}\]</div><div>\[y_i \sim Poisson(\lambda)\]</div><ul><li>benchmark design</li></ul><pre><code class="language-julia"># Number of data points per unit
Nd = [1, 2, 5]
# Number of units in model
Ns = 10
# Number of simulations
Nreps = 25
options = (Nsamples=2000, Nadapt=1000, delta=.8, Nd=Nd, Ns=Ns)
</code></pre><ul><li>speed</li></ul><img src="images/Hierarchical_Poisson/summary_time.png" width="500"/><ul><li>allocations</li></ul><img src="images/Hierarchical_Poisson/summary_allocations.png" width="500"/><ul><li>effective sample size</li></ul><img src="images/Hierarchical_Poisson/density_a0_ess.png" width="500"/><h3><a class="nav-anchor" id="Forward-vs.-Reverse-Autodiff-1" href="#Forward-vs.-Reverse-Autodiff-1">Forward vs. Reverse Autodiff</a></h3><ul><li><p>Hierarchical Poisson</p></li><li><p>benchmark design</p></li></ul><pre><code class="language-julia">
# Number of data points per unit
Nd = 1
# Number of units in model
Ns = [10, 20, 50]
# Number of simulations
Nreps = 20
autodiff = [:forward, :reverse]
options = (Nsamples=2000, Nadapt=1000, delta=.8, Nd=Nd, Ns=Ns, autodiff=autodiff)
</code></pre><ul><li>speed</li></ul><img src="images/Autodiff/summary_time.png" width="500"/><ul><li>allocations</li></ul><img src="images/Autodiff/summary_allocations.png" width="500"/><ul><li>effective sample size</li></ul><img src="images/Autodiff/density_a0_ess.png" width="700"/><footer><hr/><a class="previous" href="../example/"><span class="direction">Previous</span><span class="title">Example</span></a></footer></article></body></html>
